import{r as g,o as _,a as d,b as t,s as f,v as h,F as y,f as v,n as k,t as o,j as i}from"./vue-CbfYRXie.js";import{a as N}from"./network-QpDy7ETe.js";const w={class:"p-6 font-nanum"},B={class:"flex flex-wrap gap-4 mb-6 items-end"},D={class:"flex flex-col w-32"},F={class:"w-full border text-sm"},S={class:"border p-2"},R={class:"border p-2 text-right"},C={class:"border p-2 text-right"},E={class:"border p-2 text-right"},L={key:0},M={key:1,class:"font-bold bg-gray-200"},V={class:"border p-2 text-right"},Y={class:"border p-2 text-right"},j={class:"border p-2 text-right"},U={__name:"BudgetStatus",setup(z){const m=new Date().getFullYear(),p=g({year:m}),u=g([]),c=g({budget:0,expense:0,remaining:0}),b=async()=>{try{const s=await N.get("/api/budget-status",{params:{year:p.value.year}});u.value=s.data;const e=s.data.reduce((n,l)=>n+Number(l.total_budget),0),r=s.data.reduce((n,l)=>n+Number(l.total_expense),0),x=s.data.reduce((n,l)=>n+Number(l.remaining_amount),0);c.value={budget:e,expense:r,remaining:x}}catch{u.value=[]}};_(()=>{b()});const a=s=>{if(s==null)return"";const e=Number(s);return isNaN(e)?s:e.toLocaleString("ko-KR",{maximumFractionDigits:0})};return(s,e)=>(i(),d("div",w,[e[5]||(e[5]=t("h2",{class:"text-2xl font-bold text-purple-700 mb-6"},"🏛 예산집행 현황",-1)),t("div",B,[t("div",D,[e[1]||(e[1]=t("label",{class:"font-bold mb-1 text-gray-700"},"기준년도",-1)),f(t("input",{type:"number","onUpdate:modelValue":e[0]||(e[0]=r=>p.value.year=r),class:"border rounded p-2 w-full"},null,512),[[h,p.value.year]])]),t("div",{class:"flex items-end"},[t("button",{onClick:b,class:"px-5 py-2 bg-gradient-to-r from-purple-500 to-indigo-600 text-white rounded-lg shadow hover:from-purple-600 hover:to-indigo-700 transition"}," 조회 ")])]),t("div",null,[t("table",F,[e[4]||(e[4]=t("thead",null,[t("tr",{class:"bg-purple-100 text-gray-800"},[t("th",{class:"border p-2"},"부서명"),t("th",{class:"border p-2 text-center"},"총예산액"),t("th",{class:"border p-2 text-center"},"총지출액"),t("th",{class:"border p-2 text-center"},"잔액")])],-1)),t("tbody",null,[(i(!0),d(y,null,v(u.value,r=>(i(),d("tr",{key:r.dept_id,class:k(r.remaining_amount<0?"bg-red-100 text-red-700 font-semibold":"bg-white")},[t("td",S,o(r.dept_name),1),t("td",R,o(a(r.total_budget)),1),t("td",C,o(a(r.total_expense)),1),t("td",E,o(a(r.remaining_amount)),1)],2))),128)),u.value.length===0?(i(),d("tr",L,[...e[2]||(e[2]=[t("td",{colspan:"4",class:"text-center p-4 text-gray-500"},"데이터가 없습니다.",-1)])])):(i(),d("tr",M,[e[3]||(e[3]=t("td",{class:"border p-2 text-center"},"합계",-1)),t("td",V,o(a(c.value.budget)),1),t("td",Y,o(a(c.value.expense)),1),t("td",j,o(a(c.value.remaining)),1)]))])])])]))}};export{U as default};
