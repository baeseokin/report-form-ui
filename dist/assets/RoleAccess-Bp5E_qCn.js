import{r as d,G as y,o as x,a as n,b as s,s as b,E as w,F as v,f,t as _,I as k,j as r}from"./vue-CbfYRXie.js";import{a as u}from"./network-QpDy7ETe.js";const A={class:"p-6 font-nanum bg-white shadow rounded-lg"},V={class:"mb-6"},B=["value"],C={class:"w-full border text-center mb-6"},E={class:"border p-2 font-medium text-gray-700"},M={class:"border"},U=["onUpdate:modelValue"],I={__name:"RoleAccess",setup(j){const i=d([]),o=d(null),p=d([]),l=y({}),c=["보고서 작성","청구목록 조회","내결재목록 조회","사용자 관리","권한 관리","계정과목 관리","예산 관리","예산집행 현황"];x(async()=>{const a=await u.get("/api/roles");i.value=a.data.map(e=>({id:e.role_id,role_name:e.role_name}))});const m=async()=>{if(!o.value)return;const a=await u.get(`/api/access/${o.value}`);p.value=a.data.access,c.forEach(e=>{l[e]=p.value.some(t=>t.menu_name===e&&t.access_type==="all")})},g=async()=>{if(!o.value){alert("먼저 역할을 선택하세요.");return}for(const a of c){const e=l[a]===!0;await u.post("/api/access",{roleId:o.value,menuName:a,accessType:"all",enabled:e})}alert("권한이 저장되었습니다."),await m()};return(a,e)=>(r(),n("div",A,[e[3]||(e[3]=s("h2",{class:"text-2xl font-bold text-purple-700 mb-6"},"🔑 권한 관리",-1)),s("div",V,[e[1]||(e[1]=s("label",{class:"block font-semibold mb-2"},"역할 선택",-1)),b(s("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.value=t),onChange:m,class:"border p-2 rounded w-64 focus:ring-2 focus:ring-purple-400"},[(r(!0),n(v,null,f(i.value,t=>(r(),n("option",{key:t.id,value:t.id},_(t.role_name),9,B))),128))],544),[[w,o.value]])]),s("table",C,[e[2]||(e[2]=s("thead",{class:"bg-purple-100 text-gray-800"},[s("tr",null,[s("th",{class:"border p-2"},"메뉴"),s("th",{class:"border p-2"},"접근 (all)")])],-1)),s("tbody",null,[(r(),n(v,null,f(c,t=>s("tr",{key:t,class:"hover:bg-gray-50"},[s("td",E,_(t),1),s("td",M,[b(s("input",{type:"checkbox","onUpdate:modelValue":h=>l[t]=h,class:"w-5 h-5 accent-purple-600"},null,8,U),[[k,l[t]]])])])),64))])]),s("div",{class:"flex justify-end"},[s("button",{onClick:g,class:"px-5 py-2 bg-gradient-to-r from-purple-500 to-indigo-600 text-white rounded-lg shadow hover:from-purple-600 hover:to-indigo-700 transition"}," 저장하기 ")])]))}};export{I as default};
